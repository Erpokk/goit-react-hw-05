{"version":3,"file":"MoviesPage-DlzMzTop.js","sources":["../../pages/MoviesPage/MoviesPage.jsx"],"sourcesContent":["import axios from \"axios\";\nimport { useEffect, useState } from \"react\";\nimport  usePagination from '../../src/hooks/usePagination'\n\nimport css from '../MoviesPage/MoviesPage.module.css';\n\nimport MovieList from \"../../src/components/MovieList/MovieList\";\nimport Pagination from \"../../src/components/Pagination/Pagination\";\nimport getApiOptions from '../../src/utils/apiConfig.js'\n\nconst MoviesPage = () => {\n    const [search, setSearch] = useState('');\n    const [query, setQuery] = useState(() => sessionStorage.getItem('query') || '');\n    const [movies, setMovies] = useState([]);\n    const [ttlPages, setTtlPage] = useState(0)\n\n    let savedPage = JSON.parse(sessionStorage.getItem('page')) || 1\n\n\n    const { curPage, handleNextPage, handlePrevPage, setCurPage } = usePagination(savedPage, ttlPages);\n    const url = `https://api.themoviedb.org/3/search/movie?language=en-US&query=${query}&page=${curPage}`;\n\n    useEffect(() => {\n        const fetchMovies = async () => {\n            if (!query) return;\n            try {\n                const response = await axios.get(url, getApiOptions);\n                setMovies(response.data.results);\n                setTtlPage(response.data.total_pages);\n            } catch (err) {\n                console.log(err);\n            }\n        };\n        fetchMovies();\n\n    }, [query, curPage]);\n\n    const handleSearch = (e) => {\n        e.preventDefault();\n        \n        sessionStorage.setItem('query', search )\n        setQuery(search);\n        setCurPage(1);\n    };\n    \n    return (\n        <section className=\"section\">\n            <h1 className={css.homeTitle}>Search Movies</h1>\n            <form onSubmit={handleSearch} className={css.formContainer}>\n                <label htmlFor=\"movieSearch\"></label>\n                <input\n                    type=\"text\"\n                    id=\"movieSearch\"\n                    name=\"movieSearch\"\n                    value={search}\n                    onChange={(e) => setSearch(e.target.value)}\n                    placeholder=\"Search for a movie...\"\n                    className={css.input} \n                />\n                <button type=\"submit\" className={css.button}>Search</button> {/* Применяем стиль к кнопке */}\n            </form>\n\n            <MovieList movies={movies} />\n            {movies.length != 0 && (<Pagination\n                curPage={curPage}\n                handleNextPage={handleNextPage}\n                handlePrevPage={handlePrevPage}\n                ttlPages={ttlPages}\n            />)}\n            \n           \n        </section>\n    );\n};\n\nexport default MoviesPage;"],"names":["MoviesPage","search","setSearch","useState","query","setQuery","movies","setMovies","ttlPages","setTtlPage","savedPage","curPage","handleNextPage","handlePrevPage","setCurPage","usePagination","url","useEffect","response","axios","getApiOptions","err","handleSearch","e","jsxs","jsx","css","MovieList","Pagination"],"mappings":"2WAUMA,EAAa,IAAM,CACrB,KAAM,CAACC,EAAQC,CAAS,EAAIC,WAAS,EAAE,EACjC,CAACC,EAAOC,CAAQ,EAAIF,EAAA,SAAS,IAAM,eAAe,QAAQ,OAAO,GAAK,EAAE,EACxE,CAACG,EAAQC,CAAS,EAAIJ,EAAA,SAAS,CAAE,CAAA,EACjC,CAACK,EAAUC,CAAU,EAAIN,WAAS,CAAC,EAEzC,IAAIO,EAAY,KAAK,MAAM,eAAe,QAAQ,MAAM,CAAC,GAAK,EAGxD,KAAA,CAAE,QAAAC,EAAS,eAAAC,EAAgB,eAAAC,EAAgB,WAAAC,GAAeC,EAAcL,EAAWF,CAAQ,EAC3FQ,EAAM,kEAAkEZ,CAAK,SAASO,CAAO,GAEnGM,EAAAA,UAAU,IAAM,EACQ,SAAY,CAC5B,GAAKb,EACD,GAAA,CACA,MAAMc,EAAW,MAAMC,EAAM,IAAIH,EAAKI,CAAa,EACzCb,EAAAW,EAAS,KAAK,OAAO,EACpBT,EAAAS,EAAS,KAAK,WAAW,QAC/BG,EAAK,CACV,QAAQ,IAAIA,CAAG,CACnB,CAAA,IAEQ,EAEb,CAACjB,EAAOO,CAAO,CAAC,EAEb,MAAAW,EAAgBC,GAAM,CACxBA,EAAE,eAAe,EAEF,eAAA,QAAQ,QAAStB,CAAO,EACvCI,EAASJ,CAAM,EACfa,EAAW,CAAC,CAAA,EAIZ,OAAAU,EAAA,KAAC,UAAQ,CAAA,UAAU,UACf,SAAA,CAAAC,EAAA,IAAC,KAAG,CAAA,UAAWC,EAAI,UAAW,SAAa,gBAAA,SAC1C,OAAK,CAAA,SAAUJ,EAAc,UAAWI,EAAI,cACzC,SAAA,CAACD,EAAAA,IAAA,QAAA,CAAM,QAAQ,aAAc,CAAA,EAC7BA,EAAA,IAAC,QAAA,CACG,KAAK,OACL,GAAG,cACH,KAAK,cACL,MAAOxB,EACP,SAAWsB,GAAMrB,EAAUqB,EAAE,OAAO,KAAK,EACzC,YAAY,wBACZ,UAAWG,EAAI,KAAA,CACnB,QACC,SAAO,CAAA,KAAK,SAAS,UAAWA,EAAI,OAAQ,SAAM,SAAA,EAAS,GAAA,EAChE,EAEAD,MAACE,GAAU,OAAArB,EAAgB,EAC1BA,EAAO,QAAU,GAAMmB,EAAA,IAACG,EAAA,CACrB,QAAAjB,EACA,eAAAC,EACA,eAAAC,EACA,SAAAL,CAAA,CACJ,CAGJ,CAAA,CAAA,CAER"}